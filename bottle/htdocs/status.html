 <!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Title of the document</title>
<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
<script src="js/jquery-3.1.1.min.js" type="text/javascript"></script>	
<script src="js/bootstrap.min.js" type="text/javascript"></script>
<script src="js/jquery.tablesorter.min.js" type="text/javascript"></script>	
</head>
<!--                             -->
<body>
<ul class="nav nav-tabs">
	<li role="presentation"><a href="status.html">alle Verbindungen</a></li>
	<li role="presentation"><a href="wifi_2.html">wifi auswahlen</a></li>
	<li role="presentation" onclick="location.reload(true);"><a href="#">seite neuladen</a></li>
</ul>

<div class="row">
 <!--<div class="btn btn-default">default_button</div>-->
	
  <div id="output" class="container">
		<div id="reload"><button onclick="location.reload(true);">neu laden</button></div>
		<table id="status_table" class="table table-striped tablesorter"></table>
	</div>

</div>
<!--                             -->
<script type="text/javascript">

	function ajax(){
		var xhr = new XMLHttpRequest();
		xhr.open('GET', '/status_nf_json', true);
		xhr.onload = function () {
		// Request finished. Do processing here.
			//var elem=document.getElementsByTagName("body")[0];
			var elem=document.getElementById("output");
			var j=JSON.parse(xhr.responseText);
			var j=JSON.parse(j);
			var tbl=document.getElementById("status_table");

			console.log(j.length);
			var thead=document.createElement("thead");
			var tr=document.createElement("tr");

			var td=document.createElement("th");
				td.innerHTML="Destination IP";
				tr.appendChild(td);
			var td=document.createElement("th");
				td.innerHTML="Destination Hostname";
				tr.appendChild(td);
			var td=document.createElement("th");
				td.innerHTML="Destination Country";
				tr.appendChild(td);
			var td=document.createElement("th");
				td.innerHTML="Dport_name";
				tr.appendChild(td);
			var td=document.createElement("th");
				td.innerHTML="Delta_time";
				tr.appendChild(td);
			var td=document.createElement("th");
				td.innerHTML="Packet Traffic";
				tr.appendChild(td);
			var td=document.createElement("th");
				td.innerHTML="Daten Traffic in Bytes";
				tr.appendChild(td);
			var td=document.createElement("th");
				td.innerHTML="Trans Layer Protocol Name";
				tr.appendChild(td);
			thead.appendChild(tr);
			tbl.appendChild(thead);

			var tbody=document.createElement("tbody");
			var gatewayIP="10.254.239.1";
			for (i=0;i<j.length;i++){
				if(j[i]==null || j[i].cons[0].dst==gatewayIP||j[i].cons[0].src==gatewayIP){
					continue;
				}
				var tr=document.createElement("tr");
				
				var td=document.createElement("td");
					td.innerHTML=j[i].cons[0].dst;
					tr.appendChild(td);
				var td=document.createElement("td");
					td.innerHTML=j[i].cons[0].dst_name;
					tr.appendChild(td);
				var td=document.createElement("td");
					td.innerHTML=j[i].cons[0].dst_country;
					tr.appendChild(td);
				var td=document.createElement("td");
					td.innerHTML=j[i].cons[0].dport_name;
					tr.appendChild(td);
				var td=document.createElement("td");
					td.innerHTML=j[i].delta_time;
					tr.appendChild(td);
				var td=document.createElement("td");
					td.innerHTML=Number(j[i].cons[0].packets) + Number(j[i].cons[1].packets);
					tr.appendChild(td);
				var td=document.createElement( "td" );
					td.innerHTML=Number(j[i].cons[0].bytes) + Number(j[i].cons[1].bytes);
					tr.appendChild(td);
				var td=document.createElement("td");
					td.innerHTML=j[i].proto_name;
					tr.appendChild(td);

				tbody.appendChild(tr);

				//console.log(j[i].status);
				//console.log(j[i].status);
				//alert(j[i].status);
			}

			tbl.appendChild(tbody);
			//elem.innerHTML=xhr.responseText;
			elem.appendChild(tbl);
			//tbl.tablesorter();
			$("#status_table").tablesorter(); 
		};
		xhr.send(null);	
	}

$(document).ready(function(){
	ajax();
	//ajax2();
}); 

</script>

<script type="text/javascript">
//$(document).ready(function(){}); 
</script>

</body>
</html> 
